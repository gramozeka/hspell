<HTML DIR=RTL>
<HEAD>
<meta http-equiv=Content-Type content=text/html; charset=ISO-8859-8-I>
<META HTTP-EQUIV=Content-Language CONTENT=he>

<TITLE>
הרצאה על אודות hspell, מאיית עברי חופשי
</TITLE>
</HEAD>

<BODY>
<H1> hspell - מאיית עברי חופשי</H1>
התכנה נכתבה ע"י <A HREF=http://nadav.harel.org.il>נדב הראל</A> 
ו<A HREF=http://www.cs.technion.ac.il/~danken>דן קניגסברג</A>. 
כל הזכויות שמורות (C). באמת! 
<P> ניתן להשיג אותה באתר 
<A HREF=http://www.ivrix.org.il/projects/spell-checker/>Ivrix</A>.
חבילות ה-RPM שניתן להוריד משם הן <A HREF=dansrpm.pub>חתומות</A>.
<!--בלתי אחראי ולא יציב, ניתן להוריד מ<A
HREF=hspell-0.4-1.i386.rpm>כאן</A> (וגם את ה<A 
HREF=hspell-0.4-1.src.rpm>SRPM</A> שלו).-->

<H2>הצורך:</H2>
ככל הידוע לנו (לאחר בירור מעמיק), אין תכנת איות עברית חופשית.
התכנות הזמינות הן כולן בתשלום (אלא אם גונבים אותן).
בוודאי שאין הן ניתנות לשינוי, הרחבה, הסבה למטרות שונות, או למחקר נוסף.

<P>
מרבית משתמשי המחשב בעולם בחרו, מטעמים אלה או אחרים, במוצרי מיקרוסופט. אולם
למשתמש דובר-האנגלית (וכן לדוברי שפות אירופיות אחרות) יש אלטרנטיבות טובות למדיי,
בדמות מערכות Unix. 
בולטות במיוחד מערכות Linux ו-FreeBSD שהן חופשיות, פתוחות, וזמינות
לכול.

התמיכה בעברית במערכות אלה די מוגבלת, וכאמור, אין עבורן מאיית.

<H2>בעיות מיוחדות לאיות עברי:</H2>
בעברית יש הרבה מאוד צורות חוקיות לכל מילה - 
מילות-עזר מצטרפות למילה שאחריהן, נטיית
פועל משתנה בין גוף לגוף, פעלים יוצאים מקבלים כינויים חבורים (וכשתשמרוני)
ושמות-עצם נסמכים משתנים בהתאם למין ומספר הסומך. 
מספר הצורות גדול ללא השוואה לעומת אנגלית (שהיא מקרה פשוט באורח יוצא דופן),
והרבה יותר משאר שפות אירופה המוכרות לנו (ברדידות) - 
אפילו מהשפות בעלות צורת אקוזטיב.
לכן, איסוף רשימת מילים "שטוחה" אחת, איננה ישימה.

<P>
בעיה נוספת נובעת מקהל היעד הזעום: מעטים האנשים שאיות עברי מעניין אותם. אולם אל
לנו לתלות בכך את חסרונו של מאיית עברי חופשי. לשפות מעוטות-אוכלוסין כפינית ודנית
יש זה מכבר מילונים חופשיים 
(<A HREF=http://www.freedict.com>www.freedict.com</A>) - 
אולם בעברית אי אפשר להשיג (באופן חוקי) את רשימת המילים. 
משום מה, הציבור כותב-העברית אינו נרתע מהישענות על פתרונות קנייניים, ולא רואה
את היתרונות הגלומים בפיתוח משותף וחופשי.

<H2>המעיית האברי שלנו:</H2>
hspell מבקשת למלא את החסר בתחום זה. תכנה זו מקבלת כקלט טקסט עברי, עוברת עליו
מילה-מילה, ומדפיסה כפלט את רשימת המילים שהיא איננה מכירה.
אם המילה מתחילה במילות עזר (מש"ה וכל"ב וחברותיהם),
התכנה מסירה אותן ומנסה לזהות את המילה המתקבלת.

<P>
hspell יכולה לציין מדוע מילה התקבלה - למשל האם היא הטיה של פועל עם מילות-עזר 
תחיליות כלשהן. כמו כן, היא יכולה להציע תיקונים למילה שגויה - נוח במיוחד למציאת
הכתיב המלא הנכון של מילה.

<P>
hspell נמסרת לשימוש תחת רישיון <A HREF=http://www.gnu.org>GPL</A> אשר אומר בערך:
מותר לכל אחד לעשות בתכנה כרצונו, אולם כל שינוי חייב להיות מופץ ברבים תחת אותו
רישיון. שימו לב ש<B>כל</B> רכיבי hspell מוגנים ע"י ה-GPL, ובכלל זה סקריפטים, 
קובצי נתונים ורשימות המילים.

<H2>עקרונות האיות:</H2>
אנו עובדים ב"כתיב מלא" - כתיב חסר-ניקוד. זהו הכתיב המקובל ביותר 
(בטקסטים המיועדים
למבוגרים), וקל יותר לממשו.
אנו נצמדים לכללי האקדמיה ללשון העברית.
בעתיד נוכל (אנו או מישהו אחר) להוסיף תמיכה בכללי איות אחרים.
למשל, לפי כללי האקדמיה, הריבוי של "עת" הוא "עתים". אולם רבים מעדיפים את הצורה
"עיתים", ונוכל להתיר זאת.

<H2>אוצר המילים:</H2>
hspell משתמשת ברשימה ארוכה של שמות עצם, תארים ופעלים על כל הטיותיהם החוקיות.

שם עצם לדוגמה:
<PRE>
כלב
כלב-
כלבי
כלבנו
כלבך
כלבכם
כלבכן
כלבו
כלבה
כלבן
כלבם
כלבים
כלבי-
כלביי
כלבינו
כלביך
כלבייך
כלביכם
כלביכן
כלביו
כלביה
כלביהן
כלביהם
</PRE>

פועל לדוגמה:
<PRE>
לשמור
שמרתי
שמרת
שמרת
שמר
שמרה
שמרנו
שמרתם
שמרתן
שמרו
שמור
שמרי
שמרו
שמורנה
אשמור
תשמור
תשמרי
ישמור
תשמור
נשמור
תשמרו
תשמורנה
ישמרו
שומר
שומרת
שומרים
שומרות
שמור
שמורה
שמורת-
שמורים
שמורי-
שמורות
</PRE>

<H2>כללי הנטייה:</H2>
רשימת הנטיות החוקיות  מיוצרת באופן אוטומטי ע"י <TT>wolig.pl</TT> ו-<TT>woo</TT>
 מתוך כללים כגון
<PRE>
כלב ע
שמר פ,קל_אפעול+,פי+,פו,הת,נפ
</PRE>
כללים אלה אומרים ש"כלב" הוא שם עצם בעל נטייה רגילה, 
וש"שמר" הוא שורש בעל נטייה רגילה
בבניינים קל, נפעל, פיעל, פועל והתפעל. הנטיות "לשמור" ו"לשמר" הן פעלים יוצאים,
היכולים לקבל כינויים חבורים.

הכללים עלולים להיות סבוכים יותר:
<PRE>
צומת ע,ים,אבד_ו
שבע פ,קל_אפעל,הפ,הו,בינוני_שמן,אין_שם_פעולה,אין_פעול #  שביעה - קצת משונה
</PRE>

<H2>איך נבנית רשימת ההטיות של פועל:</H2>
בהינתן שורש ובניין, תכנת <TT>woo</TT> בונה את צורת הנסתר של הפועל.
או-אז היא עוברת על כל הזמנים (עבר, מקור, הווה, עתיד, ציווי) ועל כל הגופים,
ומטה את הפועל ע"פ האלגוריתם של פרופ' עוזי אורנן. <BR>
העמוד שלהלן מצולם
(בחדות גרועה בכוונה) מתוך "<A
HREF=http://www.academon.co.il/details.asp?id=000750010279>נטיית
הפועל בתרשימי זרימה</A>" מאת עוזי אורנן, הוצאת אקדמון, תש"ם. 
אלגוריתם מלא והרחבות
נוספות מופיעים בספרו החדש "המילה האחרונה - מנגנון התצורה של המילה העברית",
הוצאת אוניברסיטת חיפה, 2003.
<p>
<IMG src=ornan-past.png width=500></IMG>

<P>
<TT>woo</TT> כתובה ב-<A HREF=http://www.perl.org>perl</A>, 
שהיא שפת תכנות המתאימה
במיוחד למניפולציות של טקסט.

לדוגמה קטע הקוד להלן, מבדיל בין התקררות להצטננות:
<PRE DIR=LTR>
  sub _bdoq_sikul {
    my $w = shift;
<BDO DIR=LTR>    return if ($w->{q} !~ m/(ד|ז|ט|ס|צ|ש|ת)/);</BDO>
<BDO DIR=LTR>    $w->{mishqal} =~ s/^התq/הqת/ if ($w->{q} =~ m/(ס|ש)/);</BDO>
<BDO DIR=LTR>    $w->{mishqal} =~ s/^התq/הqט/ if ($w->{q} eq 'צ');</BDO>
<BDO DIR=LTR>    $w->{mishqal} =~ s/^התq/הqד/ if ($w->{q} eq 'ז');</BDO>
<BDO DIR=LTR>    $w->{mishqal} =~ s/^התq/היq/ if ($w->{q} =~ m/(ת|ד|ט)/);</BDO>
  }
</PRE>
והקטע השני מממש את מקרה 13 באלגוריתם של עוזי אורנן:
<PRE DIR=LTR>
<BDO DIR=LTR>    $hataya =~ s/(ה.+)י(.)$/$1$2/;</BDO>
</PRE>

<H2>איך נבנית רשימת ההטיות של שם עצם:</H2>
ברמת העיקרון - באותו אופן, אולם יש כמה הבדלים משמעותיים אשר מקשים עלינו
<UL>
<LI> אין בידינו אלגוריתם למימוש - ונדב נאלץ לפתח אלגוריתם הטיה משלו.
<LI> יש יותר מקרים מיוחדים, והם שונים יותר זה מזה. מאות מקרים מתוארים ב"ספר
השמות השלם" של ד"ר שאול ברקלי.
<LI> נראה שיש יותר שמות-עצם מפעלים.
</UL>

<H2>הצגת-תכלית של יכולות עתידיות</H2>
כאמור לעיל, hspell קוראת רשימת הטיות ארוכה אשר מיוצרת מראש. היא מאחסנת את
הרשימה בזיכרון בטבלת hash, המאפשרת שליפה מהירה. לכל הטיה מצוינת צורת הבסיס ממנה
היא נגזרה.
<P>
כאשר האופציה <A DIR=LTR>-v</A> מצורפת לתכנה, hspell מתארת בפירוט מדוע היא הסכימה לקבל את
המילים שהיא קיבלה. למשל, כאשר כתבתי על "צבור של אנשים", hspell לא התריע על חוסרה
של היו"ד במילה "ציבור". רציתי לבדוק האם זוהי תקלה, והרצתי שוב עם פרמטר הפירוט.
אז קיבלתי את הנימוק
<PRE DIR=LTR>
found צבור: prefix '' stem /usr/local/share/hspell/out.verbs:לצבור
</PRE>
אשר מסביר בפשטות מדוע זו, בכל זאת, מילה חוקית.
זהו רק קצה-קצהו של מה שניתן לעשות באמצעות המידע המורפולוגי שיש לנו על כל הטיה.
<P>
אופציה מעניינת נוספת היא <A DIR=LTR>-c</A>.
 כאן hspell מנסה להציע תיקונים לשגיאות בהן היא
נתקלת. כיוון שאוצר המילים שלה עדיין מוגבל, לעתים היא "מתקנת" מילים חוקיות
למהדרין. אולם כבר עתה, אופציה זו מקלה מאוד על מציאת האיות הנכון בכתיב-מלא.
למשל, רבים (ואני בכללם) היו מאייתים "הילדה היתה מאושרת" ביו"ד בודדת במילה
"הייתה". אולם hspell מכירה בבעיה זו והיא מנסה להוסיף או להשמיט אימות קריאה, על
מנת לקבל מילה חוקית. לכן היא תציע לי להחליף את "היתה" ב"הייתה".
<BR>
עם זאת, ברור שמכיוון ש-hspell היא תכנה חופשית, אם כלל-איות זה (או אחר) מעצבן
אתכם, תוכלו לשנות את התכנה עד שתערב לחככם. 

<H2>חסרונות:</H2>
<UL>
<LI> אוצר המילים שברשותנו מוגבל, ויש להרחיבו.
<LI> כעת אין תמיכה בכינויים חבורים לפעלים יוצאים (שמרתיה = שמרתי אותה).
<LI> כעת צירופים משונים כגון "ששמורנה" מתקבלים כחוקיים.
<LI> לכל אורך ההטיה, אנו שומרים את המילים בכתיב העברי המקובל (ISO-8859-8-I). 
  אין לנו ספק ששימוש 
  <A HREF=http://www.cs.technion.ac.il/users/ornan/ornan2.html>בתעתיק אורנן</A>
  (ISO-259-3) יהפוך את הקוד לפשוט ואלגנטי יותר.
</UL>

<H2>כיוונים עתידיים ומחקרים נסמכים:</H2>
<UL>
<LI> הוספת שיטות איות נוספת, מעבר לאיות התקני של האקדמיה.
 אני, למשל, מעדיף "תוכנה  אמיתית" על-פני "תכנה אמתית".
<LI> התמשקות לתכנות כגון מעבדי תמלילים.
<LI> תמיכה בניקוד (המון עבודה).
<LI> הוספת רשימות מילים מקצועיות (מתמטיקה, מדעי המחשב, הנדסת תכנה,
	 צבא, סלנג ילדותי)

<LI> מנוע חיפוש אינטיליגנטי.
<LI> ניתוח והבנת טקסט.
<LI> קריאה אוטומטית בקול רם.
<LI> תרגום אוטומטי.
<LI> מילונים עברי-עברי ועברי-לועזי.
<LI> מחקרים סטטיסטיים על השפה העברית. 
לאיזה אחוז מהשורשים שיש להם צורת "הפעיל" יש גם
צורת "הופעל"? מה מייחד את המעטים שאינם מקיימים תכונה זו? האם יש קורלציה בין
שורשים שאין להם צורת "פעול" לשורשים שאין להם שם פעולה בבניין נפעל? מה משותף
לפעלי הפעיל שאינם פעלים יוצאים? וכולי.
</UL>

<H2>איך אפשר לעזור?</H2>
אין ספק שזו השאלה שמנקרת כעת במוחכם.
<P> ובכן, אם תבדקו את hspell על טקסטים שלכם, תגלו שיש מילים חוקיות לא מעטות 
שהוא אינו מכיר. אנו נשמח מאוד אם תאספו מילים אלה ותוודאו (בעזרת מילונים או ספרי
דקדוק) שהן מאויתות בכתיב חסר-ניקוד תקין. 
לאחר מכן, הוסיפו אותן לקובצי ה-.dat ובדקו
האם <TT>woo</TT> ו-<TT>wolig</TT> מטות אותן כראוי.

<P> אנו נשמח לקבל רשימות מילים איכותיות כאלו. שימו לב ש"תכנה חופשית" אינה אמורה
להיות "תכנה ברמה ירודה", ולכן אנו מבקשים להקפיד על נכונות המילים הנכנסות למילון.
פנו אלינו בדואל danken<IMG
src=http://www.cs.technion.ac.il/images/shtru.gif>cs.technion.ac.il או
nyh<IMG src=shtru.gif>math.technion.ac.il.
</BODY>
</HTML>
